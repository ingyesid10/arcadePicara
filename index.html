<!doctype html>
<html lang="es">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Arcade Pícara — Dados (integrado)</title>

    <!-- Fonts & icons -->
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Press+Start+2P&display=swap"
        rel="stylesheet">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sniglet:wght@400;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Salsa&family=Sniglet:wght@400;800&display=swap"
        rel="stylesheet">


    <style>
        :root {
            --vh: 100%;
            /* valor inicial */
        }

        /* ---------- RESET & BASE ---------- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0
        }

        html,
        body {
            height: 100%
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: radial-gradient(circle at 30% 10%, #24103a 0%, #0b0410 50%, #000 100%);
            color: #fff;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 18px;
            /* height: calc(var(--vh, 1vh) * 100); */
        }

        /* ---------- ARCADE CONTAINER ---------- */
        .arcade-container {
            width: 100%;
            max-width: 876px;
            border-radius: 12px;
            overflow: hidden;
            background: linear-gradient(180deg, #0f0b20 0%, #0a0410 100%);
            border: 6px solid #2b0a1b;
            box-shadow: 0 0 45px rgba(255, 80, 120, 0.06), inset 0 0 30px rgba(0, 0, 0, 0.6);
            height: 100svh;
        }

        /* ---------- BANNER ---------- */
        .banner {
            display: flex;
            gap: 14px;
            align-items: center;
            padding: 12px 18px;
            background: #c81f2b;
            border-bottom: 6px solid #0b0b10;
            border-radius: 20px;
        }

        .banner .logo-box {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            background: #141414;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 3px solid #000
        }

        .banner .logo-box img {
            width: 48px;
            height: 48px;
            object-fit: cover;
            border-radius: 6px
        }

        .banner h1 {
            color: #ffd046;
            font-size: 20px;
            letter-spacing: 3px;
            text-shadow: 0 0 10px rgba(255, 208, 70, 0.7)
        }

        /* ---------- LAYOUT ---------- */
        .main-row {
            display: flex;
            min-height: 650px
        }

        .sidebar {
            width: 150px;
            background: linear-gradient(180deg, #d1232b, #8f0d18);
            padding: 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            transition: width .34s;
            border-right: 6px solid #0b0b10;
            position: relative;
            border-radius: 20px;
        }

        .sidebar.collapsed {
            width: 84px
        }

        .menu-button {
            flex-direction: column;
            width: 86%;
            /* background:#0e0e13; */
            border-radius: 12px;
            padding: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            color: #ffd046;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-self: center;
            gap: 0;
        }

        .menu-button i {
            font-size: 22px;
            min-width: 34px;
            text-align: center
        }

        .menu-button span {
            font-weight: 700
        }

        .sidebar.collapsed .menu-button span {
            display: none
        }

        .demo-btn {
            margin-top: auto;
            background: #ffd046;
            color: #111;
            padding: 10px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            width: 86%
        }

        .collapse-toggle {
            position: absolute;
            right: 8px;
            bottom: 12px;
            background: #0b0b10;
            border-radius: 20px;
            width: 36px;
            height: 36px;
            border: 3px solid #ffd046;
            color: #ffd046;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform .25s
        }

        .collapse-toggle.rotate {
            transform: rotate(180deg)
        }

        .content-area {
            flex: 1;
            padding: 22px 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: auto;
            background-image: url(assets/img/bg/bg_08.jpeg);
            background-size: cover;
            border-radius: 20px;
        }

        .title-panel {
            width: 100%;
            max-width: 700px;
            padding: 12px;
            border-radius: 12px;
            background: linear-gradient(180deg, #351c4a, #1a0a2a);
            border: 4px solid #0f0a18;
            display: flex;
            align-items: center;
            justify-content: center
        }

        .title-panel h2 {
            color: #ffae42;
            font-size: 18px;
            text-shadow: 0 0 12px #ffae42;
            margin: 0
        }

        /* selection */
        .selector-grid {
            display: grid;
            grid-template-columns: repeat(2, 180px);
            gap: 0px;
            margin-top: 18px;
            justify-content: center;
            background: rgba(10, 10, 20, 0.6);
            border-radius: 20px;
        }

        .select-card {
            width: 180px;
            height: 180px;
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform .22s, box-shadow .22s;
            position: relative
        }

        .select-card .inner {
            width: 150px;
            height: 150px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            font-weight: 700
        }

        .select-card i {
            font-size: 40px;
            margin-bottom: 8px
        }



        /* border: 3px solid;
    box-shadow: 0 0 30px ##ffe066;
    border-color: ##ffe066;
    color:  ##ffe066;*/

        .c-hetero .inner {
            border: 3px solid;
            box-shadow: 0 0 30px #ff5f9e;
            border-color: #ff5f9e;
            color: #ff5f9e;
        }

        .c-gay .inner {
            border: 3px solid;
            box-shadow: 0 0 30px #00baff;
            border-color: #00eaff;
            color: #bff6ff;
        }

        .c-lesb .inner {
            border: 3px solid;
            box-shadow: 0 0 30px #ff6e5c;
            border-color: #ff6e5c;
            color: #ff6e5c;
        }

        .c-otro .inner {
            border: 3px solid;
            box-shadow: 0 0 30px #ffe066;
            border-color: #ffe066;
            color: #ffe066;
        }

        .select-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 50px rgba(0, 0, 0, 0.6)
        }

        .welcome-text {
            margin-top: 18px;
            color: #ffd46e;
            font-size: 14px;
            text-shadow: 0 0 8px rgba(255, 180, 60, 0.2)
        }

        /* games grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
            gap: 18px;
            width: 100%;
            max-width: 920px;
            margin-top: 18px
        }

        .game-card {
            height: 150px;
            border-radius: 12px;
            background: linear-gradient(180deg, #0a0512, #12101c);
            border: 3px solid rgba(255, 255, 255, 0.02);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px;
            cursor: pointer;
            color: #fff;
            transition: transform .22s
        }

        .game-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.03)
        }

        .game-card .g-icon {
            font-size: 34px
        }

        /* modal - initial dice stage small + expanded result */
        .modal-backdrop {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999;
            visibility: hidden;
            opacity: 0;
            transition: opacity .22s
        }

        .modal-backdrop.show {
            visibility: visible;
            opacity: 1
        }

        .modal {
            width: 480px;
            max-width: 96%;
            border-radius: 12px;
            background: #060507;
            padding: 18px;
            border: 4px solid #111;
            box-shadow: 0 0 45px rgba(0, 0, 0, 0.7);
            transform: scale(.98);
            transition: transform .22s, width .22s, height .22s;
        }

        .modal.large {
            width: 820px
        }

        .dice-stage {
            display: flex;
            gap: 18px;
            align-items: center;
            justify-content: center;
            padding: 10px 4px;
            min-height: 140px
        }

        .die {
            width: 130px;
            height: 130px;
            border-radius: 12px;
            background: #0b0b10;
            border: 6px solid #111;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            color: #fff;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.03), inset 0 0 20px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        .die.spin {
            animation: spinFake .08s linear infinite
        }

        @keyframes spinFake {
            from {
                transform: rotateX(0deg)
            }

            to {
                transform: rotateX(360deg)
            }
        }

        .result-area {
            display: none;
            flex-direction: column;
            gap: 12px;
            padding: 10px 6px
        }

        .modal.large .result-area {
            display: flex
        }

        .result-view {
            display: flex;
            gap: 18px;
            align-items: flex-start
        }

        .img-wrap {
            width: 320px;
            height: 240px;
            background: #0a0a0a;
            border-radius: 10px;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid rgba(255, 255, 255, 0.02)
        }

        .img-wrap img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain
        }

        .result-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 10px
        }

        .desc {
            font-size: 14px;
            line-height: 1.2;
            color: #f4f4f4
        }

        .cols {
            display: flex;
            gap: 12px
        }

        .col {
            flex: 1;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            padding: 10px;
            border-radius: 8px;
            font-size: 13px
        }

        .col h4 {
            font-size: 12px;
            color: #ffd046;
            margin-bottom: 8px
        }

        .curio {
            margin-top: 8px;
            font-size: 13px;
            color: #ffecb3
        }

        .modal-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            margin-top: 12px
        }

        .modal-footer .left {
            color: #cfcfcf;
            font-size: 13px
        }

        .btn {
            background: #ffd046;
            color: #111;
            padding: 10px 14px;
            border-radius: 8px;
            border: 0;
            cursor: pointer;
            font-weight: 800;
            box-shadow: 0 0 8px rgba(255, 208, 70, 0.18)
        }

        .btn.secondary {
            background: #222;
            color: #ffd046;
            border: 2px solid rgba(255, 208, 70, 0.06)
        }

        .controls {
            display: flex;
            gap: 10px;
            align-items: center;
            margin-left: 6px
        }

        .controls label {
            font-size: 13px;
            color: #dcdcdc
        }

        .time-input {
            width: 86px;
            padding: 6px 8px;
            border-radius: 6px;
            border: 2px solid #222;
            background: #08060a;
            color: #ffd046
        }

        .manual-select {
            display: none;
            gap: 8px;
            align-items: center
        }

        .manual-select select {
            padding: 6px;
            border-radius: 6px;
            background: #08060a;
            color: #fff;
            border: 2px solid #222
        }

        /* START button fixed inside modal bottom-right */
        .start-fixed {
            display: flex;
            gap: 12px;
            align-items: center
        }

        .timer-display {
            font-weight: 800;
            color: #00ffcc;
            font-size: 16px
        }

        @media (max-width:880px) {
            .modal.large {
                width: 94%
            }

            .result-view {
                flex-direction: column
            }

            .img-wrap {
                width: 100%;
                height: 220px
            }
        }

        .arcade-logo {
            width: 100%;
            margin: 0px 10px;
            background: #0b0b0b;
            border: 5px solid #1d3bb3;
            /* borde azul interno */
            outline: 5px solid #b30a0a;
            /* borde rojo externo */
            border-radius: 6px;
            padding: 8px 40px;
            display: inline-block;
            text-align: center;
            box-shadow:
                0 0 12px #ffb400,
                inset 0 0 10px rgba(255, 255, 255, 0.1);
        }

        .arcade-logo span {
            font-family: inherit;
            font-size: 24px;
            color: #ffb400;
            letter-spacing: 2px;
            /* text-shadow:
      0 0 5px #ffb400,
      0 0 10px #ffb400,
      0 0 20px #ff6600; */
        }

        /* ---------- RESPONSIVE ADJUSTMENTS ---------- */

        /* Tablets y pantallas medianas */
        @media (max-width: 1024px) {
            .main-row {
                flex-direction: column;
            }

            .sidebar {
                width: 100%;
                flex-direction: row;
                justify-content: space-around;
                border-right: none;
                border-bottom: 6px solid #0b0b10;
            }

            .sidebar.collapsed {
                width: 100%;
            }

            .collapse-toggle {
                position: static;
                margin-left: auto;
                margin-right: 10px;
            }

            .content-area {
                padding: 16px;
                min-height: auto;
            }

            .selector-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 18px;
            }

            .select-card {
                width: 100%;
                height: 180px;
            }

            .game-card {
                height: 130px;
            }
        }

        /* Teléfonos y pantallas pequeñas - MANTENER MENÚ LATERAL */
        @media (max-width: 768px) {
            body {
                padding: 6px;
                align-items: flex-start;
                min-height: 100vh;
            }

            .arcade-container {
                border-width: 4px;
                box-shadow: 0 0 25px rgba(255, 80, 120, 0.06), inset 0 0 20px rgba(0, 0, 0, 0.6);
            }

            /* Banner mejorado para móviles */
            .banner {
                flex-direction: row;
                justify-content: space-between;
                padding: 8px 12px;
                gap: 8px;
                border-bottom-width: 4px;
            }

            .banner .logo-box {
                width: 44px;
                height: 44px;
                border-width: 2px;
            }

            .banner .logo-box img {
                width: 36px;
                height: 36px;
            }

            .arcade-logo {
                padding: 8px 16px;
                border-width: 3px;
                outline-width: 3px;
                width: 100%;
            }

            .arcade-logo span {
                font-size: 14px;
                letter-spacing: 1px;
            }

            /* MANTENER SIDEBAR LATERAL EN MÓVILES */
            .main-row {
                flex-direction: row;
                min-height: 500px;
            }

            .sidebar {
                width: 80px;
                flex-direction: column;
                padding: 10px;
                gap: 8px;
                border-right: 4px solid #0b0b10;
                border-bottom: none;
                justify-content: flex-start;
            }

            .sidebar.collapsed {
                width: 60px;
            }

            .menu-button {
                width: 100%;
                padding: 10px 6px;
                justify-content: center;
                font-size: 10px;
                border-radius: 8px;
                flex-direction: column;
                gap: 6px;
            }

            .menu-button i {
                font-size: 16px;
                min-width: auto;
            }

            .menu-button span {
                font-size: 10px;
                text-align: center;
                line-height: 1.1;
            }

            .demo-btn {
                margin-top: auto;
                padding: 8px 4px;
                font-size: 10px;
                width: 100%;
            }

            .collapse-toggle {
                position: absolute;
                right: 4px;
                bottom: 8px;
                width: 28px;
                height: 28px;
                margin-top: 0;
            }

            /* Contenido principal */
            .content-area {
                padding: 12px;
                min-height: 500px;
                background-size: cover;
                height: 100dvh;
            }

            .title-panel {
                padding: 8px;
                border-width: 3px;
            }

            .title-panel h2 {
                font-size: 14px;
                text-align: center;
            }

            /* Grid de selección - mantener 2 columnas en móviles */
            .selector-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-top: 12px;
            }

            .select-card {
                width: 100%;
                height: 140px;
                border-radius: 12px;
            }

            .select-card .inner {
                width: 100px;
                height: 100px;
                border-radius: 10px;
            }

            .select-card i {
                font-size: 28px;
                margin-bottom: 6px;
            }

            .select-card span {
                font-size: 12px;
            }

            /* Texto de bienvenida */
            .welcome-text {
                font-size: 12px;
                margin-top: 12px;
                text-align: center;
                padding: 0 10px;
            }

            /* Grid de juegos - mantener 2 columnas */
            .games-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 12px;
                margin-top: 12px;
            }

            .game-card {
                height: 110px;
                padding: 8px;
                border-radius: 8px;
            }

            .game-card .g-icon {
                font-size: 28px;
            }

            .game-card h3 {
                font-size: 12px;
                text-align: center;
            }

            /* Modal mejorado para móviles */
            .modal {
                width: 96%;
                padding: 10px;
            }

            .modal.large {
                width: 96%;
                margin: 10px 10px;
                overflow-y: scroll;
                height: 100dvh;
            }

            .dice-stage {
                gap: 12px;
                padding: 8px 2px;
                min-height: 120px;
            }

            .die {
                width: 100px;
                height: 100px;
                font-size: 36px;
                border-width: 4px;
            }

            .result-view {
                flex-direction: column;
                gap: 12px;
            }

            .img-wrap {
                width: 100%;
                height: 160px;
            }

            .result-info {
                width: 100%;
            }

            .desc {
                font-size: 13px;
            }

            .cols {
                flex-direction: column;
                gap: 8px;
            }

            .col {
                font-size: 12px;
                padding: 8px;
            }

            .col h4 {
                font-size: 11px;
            }

            .curio {
                font-size: 12px;
            }

            /* Controles del modal */
            .modal-footer {
                flex-direction: column;
                gap: 12px;
            }

            .modal-footer .left {
                width: 100%;
                justify-content: space-between;
            }

            .controls {
                gap: 6px;
            }

            .controls label {
                font-size: 12px;
            }

            .time-input {
                width: 70px;
                padding: 4px 6px;
                font-size: 12px;
            }

            .start-fixed {
                width: 100%;
                justify-content: space-between;
            }

            .btn {
                padding: 8px 12px;
                font-size: 12px;
            }

            .timer-display {
                font-size: 14px;
            }
        }

        /* Pantallas muy pequeñas (<= 480px) */
        @media (max-width: 480px) {
            .sidebar {
                width: 86px;
            }

            .sidebar.collapsed {
                width: 86px;
            }

            .menu-button {
                padding: 8px 4px;
            }

            .menu-button span {
                font-size: 9px;
            }

            .selector-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 10px;
            }

            .select-card {
                height: 120px;
            }

            .select-card .inner {
                width: 110px;
                height: 110px;
            }

            .games-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .arcade-logo span {
                font-size: 14px;
            }
        }

        /* Pantallas extra pequeñas (<= 360px) */
        @media (max-width: 360px) {
            .sidebar {
                width: 86px;
            }

            .sidebar.collapsed {
                width: 45px;
            }

            .menu-button {
                padding: 6px 3px;
            }

            .menu-button i {
                font-size: 14px;
            }

            .menu-button span {
                font-size: 8px;
            }

            .select-card {
                height: 110px;
            }

            .select-card .inner {
                width: 77px;
                height: 77px;

                img {
                    width: 55px;
                }
            }

            .select-card i {
                font-size: 24px;
            }

            .game-card {
                height: 100px;
            }

            .game-card .g-icon {
                font-size: 24px;
            }

            .game-card h3 {
                font-size: 11px;
            }
        }
    </style>
</head>

<body>
    <div class="arcade-container" role="application" aria-label="Arcade Pícara">
        <!-- Banner inside -->
        <div class="banner">
            <div class="logo-box"><img src="assets/img/icon/01.jpeg" alt="logo" onerror="this.style.display='none'">
            </div>
            <div class="arcade-logo">
                <span>Arcade para adultos</span>
            </div>
        </div>

        <div class="main-row">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="menu-button" data-action="home" style="display: flex;     flex-direction: column;">
                    <img src="assets/img/icon/home.png" width="50px" style="border-radius: 11px;
    background: #000000;">
                    <span>Inicio</span>
                </div>
                <div class="menu-button" data-action="explorar">
                    <img src="assets/img/icon/buscar.png" width="50px" style="border-radius: 11px;
            background: #000000;"><span>Explorar</span>
                </div>
                <div class="menu-button" data-action="favoritos"> <img src="assets/img/icon/favoritos.png" width="50px"
                        style="border-radius: 11px;
            background: #000000; padding: 2px;"><span>Favoritos</span></div>
                <div class="menu-button" data-action="config"> <img src="assets/img/icon/home.png" width="50px" style="border-radius: 11px;
            background: #000000;"><span>Configuración</span></div>

                <!-- <div class="demo-btn">Demo - Listo</div> -->
                <div class="collapse-toggle" id="collapseToggle" title="Colapsar menu"><i
                        class="fas fa-angle-double-left"></i></div>
            </aside>

            <!-- Content -->
            <main class="content-area" id="content">
                <div class="title-panel">
                    <h2 id="titleText">¿PARA QUIÉN ES ESTE JUEGO?</h2>
                </div>

                <!-- Home selection -->
                <div id="homeView" style="display:flex;flex-direction:column;align-items:center;width:100%">
                    <div class="selector-grid" id="selectorGrid">
                        <div class="select-card c-hetero" data-key="hetero">
                            <div class="inner"> <img src="assets/img/icon/corazon.png" width="85px" style="border-radius: 11px;
            "><span>HETERO</span></div>
                        </div>
                        <div class="select-card c-gay" data-key="gay">
                            <div class="inner"><img src="assets/img/icon/corazon.png" width="85px" style="border-radius: 11px;
            "><span>GAY</span></div>
                        </div>
                        <div class="select-card c-lesb" data-key="lesbiana">
                            <div class="inner"><img src="assets/img/icon/corazon.png" width="85px" style="border-radius: 11px;
            "><span>LESBIANA</span></div>
                        </div>
                        <div class="select-card c-otro" data-key="otro">
                            <div class="inner"><img src="assets/img/icon/corazon.png" width="85px" style="border-radius: 11px;
            "><span>OTRO</span></div>
                        </div>
                    </div>

                    <div id="welcomeText" class="welcome-text" style="display:none">Bienvenido — Elige una categoría
                        para ver los juegos disponibles</div>

                    <div id="homeGames" class="games-grid" style="margin-top:20px; display:none">
                        <div class="game-card" data-game="dados">
                            <div class="g-icon">🎲</div>
                            <h3>Juego de los Dados</h3>
                        </div>
                        <div class="game-card" data-game="ruleta">
                            <div class="g-icon">🎰</div>
                            <h3>Ruleta Picante</h3>
                        </div>
                        <div class="game-card" data-game="verdad">
                            <div class="g-icon">💋</div>
                            <h3>Verdad o Reto</h3>
                        </div>
                        <div class="game-card" data-game="parejas">
                            <div class="g-icon">❤️</div>
                            <h3>Desafío de Parejas</h3>
                        </div>
                    </div>
                </div>

                <!-- Games view (after selecting category) -->
                <div id="gamesView" style="display:none;width:100%;align-items:center;">
                    <div class="games-grid" id="gamesGrid" style="margin-top:14px"></div>
                </div>

            </main>
        </div>
    </div>

    <!-- Modal -->
    <div id="modalBackdrop" class="modal-backdrop" aria-hidden="true">
        <div id="modal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
            <!-- Dice Stage -->
            <div class="dice-stage" id="diceStage">
                <div class="die" id="dieLeft">-</div>
                <div style="display:flex;flex-direction:column;gap:6px;align-items:center">
                    <div style="font-size:13px;color:#cfcfcf">Lanzando...</div>
                </div>
                <div class="die" id="dieRight">-</div>
            </div>

            <!-- Result area (hidden until spin finishes or manual finalize) -->
            <div class="result-area">
                <div class="result-view">
                    <div class="img-wrap" id="resultImageWrap">
                        <img id="resultImage" src="" alt="Resultado" style="display:none"
                            onerror="this.style.display='none'">
                    </div>
                    <div class="result-info">
                        <div class="desc" id="resultName">Name...</div>
                        <div class="desc" id="resultDesc">Descripción...</div>
                        <div class="cols">
                            <div class="col">
                                <h4>Ventajas</h4>
                                <ul id="advantagesList" style="margin:0;padding-left:18px"></ul>
                            </div>
                            <div class="col">
                                <h4>Desventajas</h4>
                                <ul id="disadvantagesList" style="margin:0;padding-left:18px"></ul>
                            </div>
                        </div>
                        <div class="curio" id="curioText"><strong>Dato curioso:</strong> ...</div>
                        <button id="modalStartBtn" class="btn">Empezar</button>
                    </div>
                </div>
            </div>

            <!-- footer controls -->
            <div class="modal-footer">
                <div class="left" style="display:flex;gap:10px;align-items:center">
                    <div class="controls">
                        <label>Tiempo (seg):</label>
                        <input id="modalTime" class="time-input" type="number" min="10" value="60" />
                    </div>

                    <div id="manualControls" class="manual-select" style="display:none">
                        <div style="color:#ffd046;font-size:13px" id="manualLabel">Seleccionar:</div>
                        <select id="manualSelect">
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                        </select>
                    </div>
                </div>

                <div class="start-fixed">
                    <div class="timer-display" id="modalTimerDisplay">01:00</div>
                    <button class="btn" onclick="startSpin()">Lanzar</button>
                    <button id="modalCloseBtn" class="btn secondary">Cerrar</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        /* =========================
          Variables & elements
        =========================*/
        const collapseToggle = document.getElementById('collapseToggle');
        const sidebar = document.getElementById('sidebar');
        collapseToggle.addEventListener('click', () => { sidebar.classList.toggle('collapsed'); collapseToggle.classList.toggle('rotate'); });

        const selectorGrid = document.getElementById('selectorGrid');
        const titleText = document.getElementById('titleText');
        const welcomeText = document.getElementById('welcomeText');
        const homeGames = document.getElementById('homeGames');
        const homeView = document.getElementById('homeView');
        const gamesView = document.getElementById('gamesView');
        const gamesGrid = document.getElementById('gamesGrid');
        const globalTime = document.getElementById('globalTime');

        let selectedCategory = null;
        let combinations = {}; // loaded from JSON
        let currentLeft = null, currentRight = null, wildcardSide = null;
        let spinInterval = null;
        let countdownInterval = null;
        let countdownRemaining = 0;

        /* Modal elements */
        const modalBackdrop = document.getElementById('modalBackdrop');
        const modal = document.getElementById('modal');
        const dieLeft = document.getElementById('dieLeft');
        const dieRight = document.getElementById('dieRight');
        const resultImage = document.getElementById('resultImage');
        const resultName = document.getElementById('resultName');
        const resultDesc = document.getElementById('resultDesc');
        const advantagesList = document.getElementById('advantagesList');
        const disadvantagesList = document.getElementById('disadvantagesList');
        const curioText = document.getElementById('curioText');

        const modalTime = document.getElementById('modalTime');
        const manualControls = document.getElementById('manualControls');
        const manualSelect = document.getElementById('manualSelect');
        const manualLabel = document.getElementById('manualLabel');
        const modalTimerDisplay = document.getElementById('modalTimerDisplay');
        const modalStartBtn = document.getElementById('modalStartBtn');
        const modalCloseBtn = document.getElementById('modalCloseBtn');

        /* ---------- NAVIGATION & UI ---------- */
        document.querySelectorAll('.menu-button').forEach(btn => {
            btn.addEventListener('click', () => {
                const action = btn.dataset.action;
                if (action === 'home') showHomeInitial();
                else if (action === 'explorar') showCategory('explorar'); // generic
                else if (action === 'favoritos') showCategory('favoritos');
                else if (action === 'config') showCategory('config');
            });
        });

        function showHome() {
            selectedCategory = null;
            homeView.style.display = 'flex';
            gamesView.style.display = 'none';
        }

        /* =========================
          Load combinations.json
          (path user said: assets/json/combinaciones.json)
        =========================*/
        async function loadCombinations() {
            try {
                const res = await fetch('assets/json/combinaciones.json');
                if (!res.ok) throw new Error('fetch failed');
                combinations = await res.json();
                console.log('combinaciones cargadas', Object.keys(combinations).length);
            } catch (err) {
                console.warn('No se pudo cargar combinaciones.json:', err);
                combinations = {}; // ok — code will handle missing entries
            }
        }
        loadCombinations();

        /* -------------------------
          UI: category selection
        --------------------------*/
        selectorGrid.querySelectorAll('.select-card').forEach(card => {
            card.addEventListener('click', () => {
                const key = card.dataset.key;
                selectCategory(key);
            });
        });

        function selectCategory(key) {
            selectedCategory = key;
            // update header
            const label = {
                hetero: 'HETERO',
                gay: 'GAY',
                lesbiana: 'LESBIANA',
                otro: 'OTRO'
            }[key] || key;
            titleText.textContent = `Bienvenido ${label}`;
            // hide selector, show welcome + games
            selectorGrid.style.display = 'none';
            welcomeText.style.display = 'block';
            homeGames.style.display = 'grid';
            gamesView.style.display = 'none';
            // populate games grid based on selection (we use same list for demo)
            populateGamesForCategory(key);
        }

        /* populate games */
        function populateGamesForCategory(cat) {
            const games = [
                { id: 'dados', title: 'Juego de los Dados', icon: '🎲' },
                { id: 'ruleta', title: 'Ruleta Picante', icon: '🎰' },
                { id: 'verdad', title: 'Verdad o Reto', icon: '💋' },
                { id: 'parejas', title: 'Desafío de Parejas', icon: '❤️' },
            ];
            gamesGrid.innerHTML = '';
            games.forEach(g => {
                const el = document.createElement('div');
                el.className = 'game-card';
                el.dataset.game = g.id;
                el.innerHTML = `<div class="g-icon">${g.icon}</div><h3>${g.title}</h3>`;
                el.addEventListener('click', () => openGame(g.id));
                gamesGrid.appendChild(el);
            });
        }

        /* quick home game click */
        document.querySelectorAll('[data-game]').forEach(el => {
            el.addEventListener('click', (e) => {
                const g = el.dataset.game;
                openGame(g);
            });
        });

        /* open game */
        function openGame(id) {
            if (id === 'dados') {
                // set current game and open modal & auto-start spin
                openDiceModal();
                setTimeout(() => startSpin(), 240);
            } else {
                alert('Juego seleccionado: ' + id + ' (placeholder)');
            }
        }

        /* =========================
          Dice modal + spin logic
        =========================*/
        function openDiceModal() {
            // reset UI
            modalBackdrop.classList.add('show');
            modal.classList.remove('large');
            dieLeft.textContent = '-';
            dieRight.textContent = '-';
            resultImage.style.display = 'none'; resultImage.src = '';
            resultDesc.textContent = '';
            resultName.textContent = '';
            advantagesList.innerHTML = ''; disadvantagesList.innerHTML = ''; curioText.textContent = '';
            manualControls.style.display = 'none';
            wildcardSide = null; currentLeft = null; currentRight = null;
            // set modal time to global default if any
            modalTime.value = parseInt(globalTime.value) || 60;
            modalTimerDisplay.textContent = formatTimer(modalTime.value);
            // ensure result area hidden:
            document.querySelector('.result-area').style.display = 'none';
        }

        /* start spin animation (casino style) */
        function startSpin() {
            // hide result area and manual controls
            document.querySelector('.result-area').style.display = 'none';
            manualControls.style.display = 'none';
            wildcardSide = null;
            // spinning rapid change using interval
            if (spinInterval) clearInterval(spinInterval);
            spinInterval = setInterval(() => {
                const a = randDieValue();
                const b = randDieValue();
                dieLeft.textContent = a === 7 ? '☆' : a;
                dieRight.textContent = b === 7 ? '☆' : b;
                dieLeft.classList.add('spin'); dieRight.classList.add('spin');
            }, 80);

            // after ~1.4-1.8s stop and determine final
            const duration = 1200 + Math.random() * 600;
            setTimeout(() => {
                if (spinInterval) { clearInterval(spinInterval); spinInterval = null; }
                dieLeft.classList.remove('spin'); dieRight.classList.remove('spin');
                // choose final values (1-6 normally)
                let left = randDieValue(); let right = randDieValue();
                // small chance to place wildcard (7) - emulate previous behaviour
                if (Math.random() < 0.08) left = 7;
                if (Math.random() < 0.08) right = 7;
                currentLeft = left; currentRight = right;

                // if any wildcard show manual controls to let user pick final value
                if (left === 7 || right === 7) {
                    wildcardSide = left === 7 ? 'left' : 'right';
                    manualControls.style.display = 'flex';
                    manualLabel.textContent = (wildcardSide === 'left') ? 'Comodín (izq) — escoge POSICIÓN:' : 'Comodín (der) — escoge NIVEL:';
                    // show star on wildcard side
                    dieLeft.textContent = (left === 7) ? '☆' : left;
                    dieRight.textContent = (right === 7) ? '☆' : right;
                    // show instruction: user must choose and then press Empezar to finalize and start timer
                    return;
                } else {
                    // no wildcard → finalize immediately and show expanded result
                    finalizeResult(left, right);
                }
            }, duration);
        }

        /* rand 1-6 */
        function randDieValue() { return Math.floor(Math.random() * 6) + 1; }

        /* finalize result: expand modal, show data from JSON */
        function finalizeResult(left, right) {
            currentLeft = left; currentRight = right;
            const key = `${left}-${right}`;
            const data = combinations[key] || combinations[`${right}-${left}`] || null;

            // enlarge modal and show result area
            modal.classList.add('large');
            document.querySelector('.result-area').style.display = 'flex';

            // image: prefer data.imagen, else try assets img guess by pattern
            if (data && data.imagen) {
                resultImage.src = data.imagen;
                resultImage.style.display = 'block';
            } else {
                // try conventional image name: assets/img/nivel1/L-R.jpeg or assets/img/dados/0L0R.png etc
                const try1 = `assets/img/nivel1/${left}-${right}.jpeg`;
                resultImage.src = try1;
                resultImage.style.display = 'block';
            }

            // fill description and lists
            if (data) {
                resultDesc.textContent = data.descripcion || data.nombre || `Resultado ${key}`;
                resultName.textContent = data.nombre || data.nombre || `Resultado ${key}`;
                advantagesList.innerHTML = Array.isArray(data.ventajas) ? data.ventajas.map(v => `<li>${v}</li>`).join('') : '<li>-</li>';
                disadvantagesList.innerHTML = Array.isArray(data.desventajas) ? data.desventajas.map(v => `<li>${v}</li>`).join('') : '<li>-</li>';
                curioText.innerHTML = `<strong>Dato curioso:</strong> ${data.dato_curioso || ''}`;
            } else {
                resultDesc.textContent = `Resultado ${left} - ${right}`;
                advantagesList.innerHTML = '<li>Divertido</li>';
                disadvantagesList.innerHTML = '<li>Puedes improvisar</li>';
                curioText.textContent = 'Dato curioso: combinación no encontrada en JSON';
            }

            // set timer display to modalTime default (doesn't start unless user clicks Empezar)
            modalTimerDisplay.textContent = formatTimer(parseInt(modalTime.value) || 60);
        }

        /* start countdown from modalTime, triggered by Empezar button.
           When there was a wildcard waiting, Empezar will first finalize selection if manualControls visible. */
        modalStartBtn.addEventListener('click', () => {
            // if manual wildcard selection active and result not yet finalized, finalize with chosen value
            if (manualControls.style.display === 'flex' && wildcardSide) {
                const pick = parseInt(manualSelect.value);
                if (wildcardSide === 'left') {
                    currentLeft = pick;
                } else {
                    currentRight = pick;
                }
                // hide manual controls and finalize
                manualControls.style.display = 'none';
                wildcardSide = null;
                finalizeResult(currentLeft, currentRight);
                return;
            }

            // if result area not shown, we are in spin stage: trigger spin (safety) else start countdown
            if (document.querySelector('.result-area').style.display !== 'flex') {
                // start spin (user pressed Empezar early)
                startSpin();
                return;
            }

            // if result displayed, start countdown with modalTime seconds
            startCountdown(parseInt(modalTime.value) || 60);
        });

        /* countdown logic */
        function startCountdown(seconds) {
            if (countdownInterval) clearInterval(countdownInterval);
            countdownRemaining = Math.max(1, Math.floor(seconds));
            modalTimerDisplay.textContent = formatTimer(countdownRemaining);
            countdownInterval = setInterval(() => {
                countdownRemaining--;
                modalTimerDisplay.textContent = formatTimer(countdownRemaining);
                if (countdownRemaining <= 0) {
                    clearInterval(countdownInterval);
                    countdownInterval = null;
                    modalTimerDisplay.textContent = '00:00';
                    // Optional: close modal or notify
                    // Here we keep modal open and show an alert
                    // You can change behavior as desired
                    alert('Tiempo finalizado.');
                }
            }, 1000);
        }

        /* close modal */
        modalCloseBtn.addEventListener('click', closeModal);
        modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(); });
        function closeModal() {
            modalBackdrop.classList.remove('show');
            modal.classList.remove('large');
            if (spinInterval) { clearInterval(spinInterval); spinInterval = null; }
            if (countdownInterval) { clearInterval(countdownInterval); countdownInterval = null; }
        }

        /* keyboard esc */
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modalBackdrop.classList.contains('show')) closeModal();
        });

        /* util: format time */
        function formatTimer(sec) {
            const s = Math.max(0, Math.floor(sec));
            const mm = String(Math.floor(s / 60)).padStart(2, '0');
            const ss = String(s % 60).padStart(2, '0');
            return `${mm}:${ss}`;
        }

        /* initialize home state */
        function showHomeInitial() {
            selectorGrid.style.display = 'grid';
            welcomeText.style.display = 'none';
            homeGames.style.display = 'none';
            gamesView.style.display = 'none';
            titleText.textContent = '¿PARA QUIÉN ES ESTE JUEGO?';
        }
        showHomeInitial();
        showHome();

        /* Home game quick open (top grid) */
        document.querySelectorAll('#homeGames .game-card').forEach(card => {
            card.addEventListener('click', () => {
                const game = card.dataset.game;
                openGame(game);
            });
        });
    </script>
</body>

</html>